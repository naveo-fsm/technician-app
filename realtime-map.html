
<!DOCTYPE html>
<html><head>
  <meta charset="UTF-8">
  <title>Live GPS Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style> body { margin: 0; } #map { height: 95vh; }</style>
</head>
<body>
<h2 style="padding:1rem;">ðŸ—º Live Technician GPS Tracker</h2>
<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  const map = L.map('map').setView([-20.17, 57.52], 11);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

  async function loadTrackers() {
    const res = await fetch('https://sheetdb.io/api/v1/xg2dgvssxzvag'); // replace with GPS SheetDB endpoint
    const data = await res.json();
    data.forEach(d => {
      if (d.Lat && d.Lng) {
        L.marker([+d.Lat, +d.Lng]).addTo(map).bindPopup(`${d.FullName || 'Technician'}<br>${d.VehicleNo || ''}`);
      }
    });
  }

  loadTrackers();
  setInterval(loadTrackers, 15000); // refresh every 15 seconds
</script>
</body></html>
