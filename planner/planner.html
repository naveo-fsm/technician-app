<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Naveo FSM – Planner</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --primary:#0056b3; --secondary:#eaf2fb; --success:#28a745; --danger:#dc3545;
    --muted:#6c757d; --text:#23272f; --bg:#f7fafd; --card:#fff; --table:#fcfcfc;
    --input:#f4f8fb; --border:#edf0f6; --radius-lg:12px; --radius:6px; --shadow:0 4px 18px rgba(0,0,0,.08);
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;background:var(--bg);font:16px/1.4 Poppins,system-ui,Segoe UI,Arial;color:var(--text);display:flex}
  .sidebar{width:260px;background:#fff;border-right:1px solid var(--border);padding:24px 16px;box-shadow:var(--shadow)}
  .brand{font-weight:700;color:var(--primary);font-size:1.2rem;margin-bottom:18px}
  .nav a{display:flex;align-items:center;gap:10px;padding:10px 12px;margin:6px 0;border-radius:8px;color:var(--text);text-decoration:none}
  .nav a:hover,.nav a.active{background:var(--secondary);color:var(--primary)}
  .content{flex:1; padding:16px}
  iframe{width:100%;height:calc(100vh - 32px);border:0;border-radius:12px;background:#fff;box-shadow:var(--shadow)}
  @media (max-width:900px){.sidebar{position:fixed;inset:0 auto 0 0;z-index:10;transform:translateX(0)} .content{margin-left:260px}}
  @media (max-width:640px){.sidebar{width:220px} .content{margin-left:220px}}
</style>
</head>
<body>
  <aside class="sidebar" aria-label="Planner navigation">
    <div class="brand">Naveo Planner</div>
    <nav class="nav">
      <a href="#" data-page="dashboard.html" class="active">📊 Dashboard</a>
      <a href="#" data-page="planner-jobs.html">📋 Service Orders</a>
      <a href="#" data-page="assign-job-enhanced.html">📝 Create Order</a>
      <a href="#" data-page="planner-inventory.html">📦 Inventory</a>
      <a href="#" data-page="assign-inventory-selector.html">🧩 Assign Inventory</a>
      <a href="#" data-page="admin-tech-master.html">👷 Tech Master</a>
      <a href="#" data-page="admin-intervention-master.html">🧰 Intervention Types</a>
      <a href="#" data-page="realtime-map.html">🗺 Live Map</a>
    </nav>
  </aside>

  <main class="content">
    <iframe id="frame" title="Planner content" src="dashboard.html"></iframe>
  </main>

  <script src="config.js"></script>
  <script src="auth.js"></script>
  <script>
    // protect planner
    try { Auth.requireRole('planner'); } catch(e) {}

    const frame=document.getElementById('frame');
    document.querySelectorAll('.nav a').forEach(a=>{
      a.addEventListener('click',e=>{
        e.preventDefault();
        document.querySelectorAll('.nav a').forEach(x=>x.classList.remove('active'));
        a.classList.add('active');
        frame.src=a.dataset.page;
      });
    });
  </script>
</body>
</html>
